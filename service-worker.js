const cacheName = "XBH_Cache_v1";
const URLS = [
    "/",
    "/index.html",
    "https://hkfygclc.github.io/Boop.mp3"
]
const appImages = [
    "/image/artwork/1_1024.jpg",
    "/image/artwork/1_1034.jpg",
    "/image/artwork/1_1036.jpg",
    "/image/artwork/1_2910.jpg",
    "/image/artwork/1_4701.jpg",
    "/image/artwork/1_4707.jpg",
    "/image/artwork/1_5097.jpg",
    "/image/artwork/1_5100.jpg",
    "/image/artwork/1_5593.jpg",
    "/image/artwork/1_6926.jpg",
    "/image/artwork/1_7141.jpg",
    "/image/artwork/1_7142.jpg",
    "/image/artwork/1_7144.jpg",
    "/image/artwork/2_194.jpg",
    "/image/artwork/2_298.jpg",
    "/image/artwork/2_601.jpg",
    "/image/artwork/2_728.jpg",
    "/image/artwork/2_2055.jpg",
    "/image/artwork/2_2056.jpg",
    "/image/artwork/2_2147.jpg",
    "/image/artwork/2_2786.jpg",
    "/image/artwork/2_2952.jpg",
    "/image/artwork/2_3358.jpg",
    "/image/artwork/2_3560.jpg",
    "/image/artwork/2_4406.jpg",
    "/image/artwork/2_4833.jpg",
    "/image/artwork/2_5335.jpg",
    "/image/artwork/2_6524.jpg",
    "/image/artwork/2_6690.jpg",
    "/image/artwork/2_6985.jpg",
    "/image/artwork/3_2728.jpg",
    "/image/artwork/3_4199.jpg",
    "/image/artwork/3_4335.jpg",
    "/image/artwork/3_4621.jpg",
    "/image/artwork/3_4635.jpg",
    "/image/artwork/3_4646.jpg",
    "/image/artwork/3_4647.jpg",
    "/image/artwork/3_4915.jpg",
    "/image/artwork/3_5537.jpg",
    "/image/artwork/3_5654.jpg",
    "/image/artwork/4_23.jpg",
    "/image/artwork/4_689.jpg",
    "/image/artwork/4_1023.jpg",
    "/image/artwork/4_1026.jpg",
    "/image/artwork/4_1257.jpg",
    "/image/artwork/4_1752.jpg",
    "/image/artwork/4_2058.jpg",
    "/image/artwork/4_2075.jpg",
    "/image/artwork/4_3543.jpg",
    "/image/artwork/4_3970.jpg",
    "/image/artwork/4_6557.jpg",
    "/image/artwork/4_6952.jpg",
    "/image/artwork/4_7146.jpg",
    "/image/artwork/4_7150.jpg",
    "/image/artwork/5_41.jpg",
    "/image/artwork/5_118.jpg",
    "/image/artwork/5_217.jpg",
    "/image/artwork/5_312.jpg",
    "/image/artwork/5_545.jpg",
    "/image/artwork/5_824.jpg",
    "/image/artwork/5_1700.jpg",
    "/image/artwork/5_1864.jpg",
    "/image/artwork/5_2067.jpg",
    "/image/artwork/5_2161.jpg",
    "/image/artwork/5_2224.jpg",
    "/image/artwork/5_2664.jpg",
    "/image/artwork/5_2757.jpg",
    "/image/artwork/5_2772.jpg",
    "/image/artwork/5_2781.jpg",
    "/image/artwork/5_2794.jpg",
    "/image/artwork/5_3526.jpg",
    "/image/artwork/5_3966.jpg",
    "/image/artwork/5_3967.jpg",
    "/image/artwork/6_661.jpg",
    "/image/artwork/6_1898.jpg",
    "/image/artwork/6_2015.jpg",
    "/image/artwork/6_2023.jpg",
    "/image/artwork/6_2868.jpg",
    "/image/artwork/6_2949.jpg",
    "/image/artwork/6_3326.jpg",
    "/image/artwork/6_5139.jpg",
    "/image/artwork/6_5143.jpg",
    "/image/artwork/7_212.jpg",
    "/image/artwork/7_213.jpg",
    "/image/artwork/7_714.jpg",
    "/image/artwork/7_1672.jpg",
    "/image/artwork/7_2071.jpg",
    "/image/artwork/7_2082.jpg",
    "/image/artwork/7_2096.jpg",
    "/image/artwork/7_2541.jpg",
    "/image/artwork/7_2569.jpg",
    "/image/artwork/7_2582.jpg",
    "/image/artwork/7_3798.jpg",
    "/image/artwork/7_5146.jpg",
    "/image/artwork/7_5924.jpg",
    "/image/artwork/7_6917.jpg",
    "/image/artwork/8_20.jpg",
    "/image/artwork/8_549.jpg",
    "/image/artwork/8_699.jpg",
    "/image/artwork/8_1009.jpg",
    "/image/artwork/8_1599.jpg",
    "/image/artwork/8_1605.jpg",
    "/image/artwork/8_2045.jpg",
    "/image/artwork/8_2167.jpg",
    "/image/artwork/8_2219.jpg",
    "/image/artwork/8_2225.jpg",
    "/image/artwork/8_2226.jpg",
    "/image/artwork/8_2577.jpg",
    "/image/artwork/8_2583.jpg",
    "/image/artwork/8_2687.jpg",
    "/image/artwork/8_2719.jpg",
    "/image/artwork/8_3015.jpg",
    "/image/artwork/8_3458.jpg",
    "/image/artwork/8_3494.jpg",
    "/image/artwork/8_3522.jpg",
    "/image/artwork/8_3599.jpg",
    "/image/artwork/8_5268.jpg",
    "/image/artwork/8_5363.jpg",
    "/image/artwork/8_5884.jpg",
    "/image/artwork/8_7116.jpg",
    "/image/artwork/9_294.jpg",
    "/image/artwork/9_1075.jpg",
    "/image/artwork/9_2011.jpg",
    "/image/artwork/9_2808.jpg",
    "/image/artwork/9_3314.jpg",
    "/image/artwork/9_3316.jpg",
    "/image/artwork/9_3495.jpg",
    "/image/artwork/9_3835.jpg",
    "/image/artwork/9_3880.jpg",
    "/image/artwork/9_4334.jpg",
    "/image/artwork/9_5205.jpg",
    "/image/artwork/9_5680.jpg",
    "/image/artwork/9_6468.jpg",
    "/image/artwork/9_7154.jpg",
    "/image/artwork/10_691.jpg",
    "/image/artwork/10_1060.jpg",
    "/image/artwork/10_2090.jpg",
    "/image/artwork/10_2091.jpg",
    "/image/artwork/10_2279.jpg",
    "/image/artwork/10_2673.jpg",
    "/image/artwork/10_3011.jpg",
    "/image/artwork/10_3039.jpg",
    "/image/artwork/10_4569.jpg",
    "/image/artwork/10_4735.jpg",
    "/image/artwork/10_6714.jpg",
    "/image/artwork/10_6727.jpg",
    "/image/artwork/10_6938.jpg",
    "/image/artwork/10_7065.jpg",
    "/image/artwork/11_73.jpg",
    "/image/artwork/11_188.jpg",
    "/image/artwork/11_317.jpg",
    "/image/artwork/11_997.jpg",
    "/image/artwork/11_1879.jpg",
    "/image/artwork/11_1960.jpg",
    "/image/artwork/11_2078.jpg",
    "/image/artwork/11_2099.jpg",
    "/image/artwork/11_2141.jpg",
    "/image/artwork/11_2525.jpg",
    "/image/artwork/11_2553.jpg",
    "/image/artwork/11_2564.jpg",
    "/image/artwork/11_2586.jpg",
    "/image/artwork/11_2591.jpg",
    "/image/artwork/11_2811.jpg",
    "/image/artwork/11_3516.jpg",
    "/image/artwork/11_3559.jpg",
    "/image/artwork/11_3871.jpg",
    "/image/artwork/11_5209.jpg",
    "/image/artwork/11_5836.jpg",
    "/image/artwork/11_5866.jpg",
    "/image/artwork/11_6006.jpg",
    "/image/artwork/11_6093.jpg",
    "/image/artwork/11_6118.jpg",
    "/image/artwork/11_6256.jpg",
    "/image/artwork/11_6762.jpg",
    "/image/artwork/12_159.jpg",
    "/image/artwork/12_288.jpg",
    "/image/artwork/12_325.jpg",
    "/image/artwork/12_355.jpg",
    "/image/artwork/12_808.jpg",
    "/image/artwork/12_836.jpg",
    "/image/artwork/12_1074.jpg",
    "/image/artwork/12_1222.jpg",
    "/image/artwork/12_1533.jpg",
    "/image/artwork/12_1536.jpg",
    "/image/artwork/12_1634.jpg",
    "/image/artwork/12_2291.jpg",
    "/image/artwork/12_2434.jpg",
    "/image/artwork/12_2748.jpg",
    "/image/artwork/12_2902.jpg",
    "/image/artwork/12_3513.jpg",
    "/image/artwork/12_4172.jpg",
    "/image/artwork/12_4580.jpg",
    "/image/artwork/12_5219.jpg",
    "/image/artwork/12_5831.jpg",
    "/image/artwork/12_5845.jpg",
    "/image/artwork/12_5878.jpg",
    "/image/artwork/12_5902.jpg",
    "/image/artwork/12_6375.jpg",
    "/image/artwork/13_1349.jpg",
    "/image/artwork/13_1724.jpg",
    "/image/artwork/13_2686.jpg",
    "/image/artwork/13_2706.jpg",
    "/image/artwork/13_3949.jpg",
    "/image/artwork/13_4247.jpg",
    "/image/artwork/13_5882.jpg",
    "/image/artwork/13_5993.jpg",
    "/image/artwork/13_6192.jpg",
    "/image/artwork/13_6195.jpg",
    "/image/artwork/13_6202.jpg",
    "/image/artwork/13_6266.jpg",
    "/image/artwork/Pri_1.jpg",
    "/image/artwork/Pri_2.jpg",
    "/image/artwork/Pri_3.jpg",
    "/image/artwork/Sec_1.jpg",
    "/image/artwork/Sec_2.jpg",
    "/image/artwork/Sec_3.jpg",
    "/image/Paper.jpg",
    "/image/button_1_1.png",
    "/image/button_1_2.png",
    "/image/button_1_3.png",
    "/image/button_1_4.png",
    "/image/button_1.png",
    "/image/button_2_1.png",
    "/image/button_2_2.png",
    "/image/button_2_3.png",
    "/image/button_2_4.png",
    "/image/button_2_5.png",
    "/image/button_2.png",
    "/image/button_3_1.png",
    "/image/button_3_2.png",
    "/image/button_3_3.png",
    "/image/button_3_4.png",
    "/image/button_3.png",
    "/image/button_4.png",
    "/image/button_pri_1.png",
    "/image/button_pri_2.png",
    "/image/button_pri_3.png",
    "/image/button_sec_1.png",
    "/image/button_sec_2.png",
    "/image/button_sec_3.png",
];

const contentToCache = URLS.concat(appImages);

self.addEventListener("install", (e) => {
    console.log("[Service Worker] Install");
    e.waitUntil(
      (async () => {
        const cache = await caches.open(cacheName);
        console.log("[Service Worker] Caching all: app shell and content");
        await cache.addAll(contentToCache);
      })()
    );
  }); 

  self.addEventListener("fetch", (e) => {
    console.log(`[Service Worker] Fetched resource ${e.request.url}`);
  });

  self.addEventListener("fetch", (e) => {
    e.respondWith(
      (async () => {
        const r = await caches.match(e.request);
        console.log(`[Service Worker] Fetching resource: ${e.request.url}`);
        if (r) {
          return r;
        }
        const response = await fetch(e.request);
        const cache = await caches.open(cacheName);
        console.log(`[Service Worker] Caching new resource: ${e.request.url}`);
        cache.put(e.request, response.clone());
        return response;
      })()
    );
  });  